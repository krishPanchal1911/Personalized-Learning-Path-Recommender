<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}My App{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #212529;
      --primary-color: #007bff;
    }

    [data-theme="dark"] {
      --bg-color: #121212;
      --text-color: #f5f5f5;
      --primary-color: #ff6f00;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: all 0.3s ease;
    }

    .navbar, .btn-primary {
      background-color: var(--primary-color) !important;
      border-color: var(--primary-color) !important;
    }

    .btn-primary {
      color: #fff;
    }

    a, .nav-link {
      color: var(--text-color) !important;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg px-4">
    <a class="navbar-brand text-light" href="{% url 'home' %}">MyApp</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'logout' %}">Logout</a>
          </li>
        {% else %}
          <li class="nav-item">
            <a class="nav-link" href="{% url 'login' %}">Login</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'signup' %}">Signup</a>
          </li>
        {% endif %}
        <li class="nav-item">
          <div class="form-check form-switch ms-3 mt-2">
            <input class="form-check-input" type="checkbox" id="themeToggle">
            <label class="form-check-label" for="themeToggle" id="themeLabel">Light Mode</label>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container mt-4">
    {% block content %}{% endblock %}
  </div>

  <script>
    const toggle = document.getElementById('themeToggle');
    const label = document.getElementById('themeLabel');
    const root = document.documentElement;

    toggle.addEventListener('change', () => {
      if (toggle.checked) {
        root.setAttribute('data-theme', 'dark');
        label.textContent = 'Dark Mode';
      } else {
        root.setAttribute('data-theme', 'light');
        label.textContent = 'Light Mode';
      }
    });
  </script>
</body>
</html>
